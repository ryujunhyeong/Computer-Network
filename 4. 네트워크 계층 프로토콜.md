# 네트워크 계층 프로토콜
##### 네트워크 계층의 프로토콜은 여러 버전을 거쳐왔으며 현재에는 IPv4와 IPv6를 사용함
## IPv4
```
1. 비신뢰적이고 비연결형의 데이터그램 프로토콜로 최선형 전송 서비스임
2. 최선형 전송은 패킷이 훼손되거나 손실, 순서에 맞지않게 도착, 지연 도착, 네트워크에 혼잡을 발생할 수 있는 것을 뜻함
3. 데이터그램 방식의 패킷 교환 네트워크에서 비연결형 프로토콜임
```
## IPv4 데이터그램 형식
```
1. 데이터그램은 IP가 사용하는 패킷임
2. 데이터그램은 가변 길이의 패킷으로 헤더와 페이로드(데이터)로 이루어 져 있음
```
## 단편화
> 최대 전송 단위(MTU)
```
1. 각 물리적인 네트워크 프로토콜마다 다름
2. 일반적으로 LAN은 1,500이지만 WAN은 이보다 크거나 작을 수 있음
3. 데이터그램을 전송하기 위해 분할하는것을 단편화(fragmentation)라 함
```
## IPv4 데이터그램의 보안
> 패킷 도청
```
1. 공격자가 IP 패킷을 가로채어 그것의 복사본을 만들 수 있음
2. 간접적인 공격으로 공격자가 패킷의 내용을 변경하지 않음
3. 탐지가 매우 어려움
4. 도청을 멈추긴 힘들지만, 암호화로 내용을 확인할 수 없도록 할 수 있음
```
> 패킷 변조
```
1. 공격자가 패킷을 가로채어 내용을 변경한 뒤 수신자에게 새로운 패킷을 전송함
2. 무결성 기술을 사용해 탐지할 수 있음
```
> IP 스푸핑
```
1. 공격자는 다른 사용자로 가장하고 IP패킷에 다른 IP를 입력하여 생성할 수 있음
2. 발신지 인증 기법을 이용해 방지할 수 있음
```
> IPSec
```
IPSec(IP Security)를 사용해 위의 공격들로부터 패킷을 보호할 수 있음
```
> > 알고리즘과 키 정의
```
보안의 목적으로 사용될 알고리즘과 키를 합의할 수 있음
```
> > 패킷 암호화
```
1. 키 정의로 합의된 공유키와 알고리즘으로 두 개체가 교환하는 패킷을 암호화함
2. 이를 활용해 패킷 도청 공격 방지
```
> > 데이터 무결성
```
1. 패킷이 전송 중 변조되지 않았음을 보장
2. 무결성 검사를 통과하지 못한 패킷을 폐기
3. 패킷 변조 공격을 방지
```
> > 발신지 인증
```
1. 발신지 인증을 통해 패킷이 다른 공격자에 의해 생성된것이 아님을 보장
2. IP 스푸핑 공격을 방지함
```
